<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gallery</title>
<style>
body { font-family: Arial; text-align:center; margin:20px; }
input { padding:10px; width:200px; }
button { padding:10px 15px; }
p.error { color:red; }
.gallery { display:grid; grid-template-columns: repeat(auto-fill, 200px); gap:10px; justify-content:center; margin-top:20px; }
.photo { border:1px solid #ccc; padding:5px; border-radius:5px; }
</style>
</head>
<body>

{% if not session.get('authenticated') %}
<h1>Enter Passkey to Access Gallery</h1>
<form method="POST">
  <input type="password" name="passkey" placeholder="Passkey" required>
  <button type="submit">Enter</button>
</form>
{% if error %}
<p class="error">{{ error }}</p>
{% endif %}
{% else %}
<h1>Gallery</h1>
<a href="/">&#8592; Back to Upload</a>
<div class="gallery">
{% for file in files %}
<div class="photo">
  <img src="/file/{{ file.id }}" alt="{{ file.filename }}" width="200"><br>
  <small>{{ file.filename }}</small>
  <form method="POST" action="/delete/{{ file.id }}">
    <button type="submit">Delete</button>
  </form>
</div>
{% endfor %}
</div>
{% endif %}

</body>
</html>
